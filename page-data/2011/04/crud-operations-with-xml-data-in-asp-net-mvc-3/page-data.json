{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/2011/04/crud-operations-with-xml-data-in-asp-net-mvc-3","result":{"data":{"post":{"__typename":"MdxPost","slug":"/2011/04/crud-operations-with-xml-data-in-asp-net-mvc-3","title":"CRUD Operations w/ XML Data in ASP.NET MVC 3","date":"04.05.2011","tags":[{"name":"ASP.NET","slug":"asp-net"}],"description":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"CRUD Operations w/ XML Data in ASP.NET MVC 3\",\n  \"slug\": \"2011/04/crud-operations-with-xml-data-in-asp-net-mvc-3\",\n  \"date\": \"2011-04-05T23:33:00.000Z\",\n  \"comments\": true,\n  \"tags\": [\"ASP.NET\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"528px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"40.833333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3KEB/8QAFhABAQEAAAAAAAAAAAAAAAAAIQAQ/9oACAEBAAEFAnG//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFxABAAMAAAAAAAAAAAAAAAAAACFRcf/aAAgBAQABPyEm2n//2gAMAwEAAgADAAAAEHvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QZ//EABsQAAEEAwAAAAAAAAAAAAAAAAEAETFRQYGR/9oACAEBAAE/EAYBxpPdFInAuL//2Q==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"CRUD Operations with XML Data in ASP.NET MVC 3\",\n    \"title\": \"CRUD Operations with XML Data in ASP.NET MVC 3\",\n    \"src\": \"/static/eb903a6518de4e757a3669047ed3b422/ea23e/CRUD_Operations_screenshot.jpg\",\n    \"srcSet\": [\"/static/eb903a6518de4e757a3669047ed3b422/46946/CRUD_Operations_screenshot.jpg 240w\", \"/static/eb903a6518de4e757a3669047ed3b422/55489/CRUD_Operations_screenshot.jpg 480w\", \"/static/eb903a6518de4e757a3669047ed3b422/ea23e/CRUD_Operations_screenshot.jpg 528w\"],\n    \"sizes\": \"(max-width: 528px) 100vw, 528px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Create, read, update, and delete (CRUD) operations are easy to perform in ASP.NET MVC. By using the default T4 scaffolding templates and strongly-typed views you can quickly build a web application that can create, update, and delete records.\"), mdx(\"p\", null, \"Using ASP.NET MVC 3 I built a simple Billing Application that performs CRUD operations on an XML file. With LINQ I was able to quickly write code to update nodes in the XML file.\"), mdx(\"h2\", null, \"How my app works\"), mdx(\"p\", null, \"My ASP.NET MVC 3 Billing App uses the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://msdn.microsoft.com/en-us/library/ff649690.aspx\"\n  }), \"Repository pattern\"), \" for accessing data. The advantages with this pattern are it makes my methods easier to maintain and limits the amount of duplicated code in the data access layer. For each CRUD operation I have a method in my repository.\"), mdx(\"h2\", null, \"Model\"), mdx(\"p\", null, \"I created a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Billing.cs\"), \" class based on the structure of my \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Billings.xml\"), \" file.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<billing>\\n\\n    <item>\\n        <id>1</id>\\n        <customer>Vandelay Industries</customer>\\n        <type>Development</type>\\n        <date>4/5/2011</date>\\n        <description>Update jQuery animation on Intranet homepage</description>\\n        <hours>2</hours>\\n    </item>\\n    <item>\\n        <id>2</id>\\n        <customer>Dunder Mifflin</customer>...\\n\")), mdx(\"p\", null, \"In my \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Billing.cs\"), \" class I used the System.ComponentModel.DataAnnotations namespace for adding validation to my model properties.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-c#\"\n  }), \"public class Billing\\n{\\n    public Billing()\\n    {\\n        this.ID = 0;\\n        this.Customer = null;\\n        this.Type = null;\\n        this.Date = DateTime.Now;\\n        this.Description = null;\\n        this.Hours = 0;\\n    }\\n\\n    public Billing(int id, string customer, string type, DateTime date, string description, int hours)\\n    {\\n        this.ID = id;\\n        this.Customer = customer;\\n        this.Type = type;\\n        this.Date = date;\\n        this.Description = description;\\n        this.Hours = hours;\\n    }\\n\\n    public int ID { get; set; }\\n    [Required(ErrorMessage = \\\"Customer is required\\\")]\\n    public string Customer { get; set; }\\n    [Required(ErrorMessage = \\\"Type is required\\\")]\\n    public string Type { get; set; }\\n    [Required(ErrorMessage = \\\"Date is required\\\")]\\n    public DateTime Date { get; set; }\\n    [Required(ErrorMessage = \\\"Description is required\\\")]\\n    public string Description { get; set; }\\n    [Required(ErrorMessage = \\\"Hours is required\\\")]\\n    public int Hours { get; set; }\\n}\\n\")), mdx(\"p\", null, \"My model folder also contains my interface \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"IBillingRepository.cs\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-c#\"\n  }), \"public interface IBillingRepository\\n{\\n    IEnumerable<Billing> GetBillings();\\n    Billing GetBillingByID(int id);\\n    void InsertBilling(Billing billing);\\n    void DeleteBilling(int id);\\n    void EditBilling(Billing billing);\\n}\\n\")), mdx(\"p\", null, \"And all the heavy lifting is done by my \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"BillingRepository.cs\"), \" class.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-c#\"\n  }), \"public class BillingRepository: IBillingRepository\\n{\\n    private List<Billing> allBillings;\\n    private XDocument billingData;\\n\\n    // constructor\\n    public BillingRepository()\\n    {\\n        allBillings = new List<Billing>();\\n\\n        billingData = XDocument.Load(HttpContext.Current.Server.MapPath(\\\"~/App_Data/Billings.xml\\\"));\\n        var billings = from billing in billingData.Descendants(\\\"item\\\")\\n                        select new Billing((int)billing.Element(\\\"id\\\"), billing.Element(\\\"customer\\\").Value,\\n                        billing.Element(\\\"type\\\").Value, (DateTime)billing.Element(\\\"date\\\"),\\n                        billing.Element(\\\"description\\\").Value, (int)billing.Element(\\\"hours\\\"));\\n        allBillings.AddRange(billings.ToList<Billing>());\\n    }\\n\\n    // return a list of all billings\\n    public IEnumerable<Billing> GetBillings()\\n    {\\n        return allBillings;\\n    }\\n\\n    public Billing GetBillingByID(int id)\\n    {\\n        return allBillings.Find(item => item.ID == id);\\n    }\\n\\n    // Insert Record\\n    public void InsertBilling(Billing billing)\\n    {\\n        billing.ID = (int)(from b in billingData.Descendants(\\\"item\\\") orderby (int)b.Element(\\\"id\\\") descending select (int)b.Element(\\\"id\\\")).FirstOrDefault() + 1;\\n\\n        billingData.Root.Add(new XElement(\\\"item\\\", new XElement(\\\"id\\\", billing.ID), new XElement(\\\"customer\\\", billing.Customer),\\n            new XElement(\\\"type\\\", billing.Type), new XElement(\\\"date\\\", billing.Date.ToShortDateString()), new XElement(\\\"description\\\", billing.Description),\\n            new XElement(\\\"hours\\\", billing.Hours)));\\n\\n        billingData.Save(HttpContext.Current.Server.MapPath(\\\"~/App_Data/Billings.xml\\\"));\\n    }\\n\\n    // Delete Record\\n    public void DeleteBilling(int id)\\n    {\\n        billingData.Root.Elements(\\\"item\\\").Where(i => (int)i.Element(\\\"id\\\") == id).Remove();\\n\\n        billingData.Save(HttpContext.Current.Server.MapPath(\\\"~/App_Data/Billings.xml\\\"));\\n    }\\n\\n    // Edit Record\\n    public void EditBilling(Billing billing)\\n    {\\n        XElement node = billingData.Root.Elements(\\\"item\\\").Where(i => (int)i.Element(\\\"id\\\") == billing.ID).FirstOrDefault();\\n\\n        node.SetElementValue(\\\"customer\\\", billing.Customer);\\n        node.SetElementValue(\\\"type\\\", billing.Type);\\n        node.SetElementValue(\\\"date\\\", billing.Date.ToShortDateString());\\n        node.SetElementValue(\\\"description\\\", billing.Description);\\n        node.SetElementValue(\\\"hours\\\", billing.Hours);\\n\\n        billingData.Save(HttpContext.Current.Server.MapPath(\\\"~/App_Data/Billings.xml\\\"));\\n    }\\n}\\n\")), mdx(\"h2\", null, \"Controller\"), mdx(\"p\", null, \"I have one Controller named \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"BillingController.cs\"), \" which interacts with my repository and contains get and post requests for performing CRUD operations. By using the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ModelState.AddModelError()\"), \" method I am able to display Exception error messages in red font for any failed CRUD operations.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-c#\"\n  }), \"public class BillingController : Controller\\n{\\n    private IBillingRepository _repository;\\n    private SelectList typeList = new SelectList(new[]{\\\"Meeting\\\",\\\"Requirements\\\",\\\"Development\\\",\\\"Testing\\\",\\\"Documentation\\\"});\\n\\n    public BillingController(): this(new BillingRepository())\\n    {\\n    }\\n\\n    public BillingController(IBillingRepository repository)\\n    {\\n        _repository = repository;\\n    }\\n\\n\\n    public ActionResult Index()\\n    {\\n        return View(_repository.GetBillings());\\n    }\\n\\n\\n    public ActionResult Details(int id)\\n    {\\n        Billing billing = _repository.GetBillingByID(id);\\n        if (billing == null)\\n            return RedirectToAction(\\\"Index\\\");\\n\\n        return View(billing);\\n    }\\n\\n\\n    public ActionResult Create()\\n    {\\n        ViewBag.TypeList = typeList;\\n        return View();\\n    }\\n\\n\\n    [HttpPost]\\n    public ActionResult Create(Billing billing)\\n    {\\n        if (ModelState.IsValid)\\n        {\\n            try\\n            {\\n                _repository.InsertBilling(billing);\\n                return RedirectToAction(\\\"Index\\\");\\n            }\\n            catch(Exception ex)\\n            {\\n                //error msg for failed insert in XML file\\n                ModelState.AddModelError(\\\"\\\", \\\"Error creating record. \\\" + ex.Message);\\n            }\\n        }\\n\\n        return View(billing);\\n    }\\n\\n\\n    public ActionResult Edit(int id)\\n    {\\n        Billing billing = _repository.GetBillingByID(id);\\n        if (billing == null)\\n            return RedirectToAction(\\\"Index\\\");\\n\\n        ViewBag.TypeList = typeList;\\n        return View(billing);\\n    }\\n\\n\\n    [HttpPost]\\n    public ActionResult Edit(Billing billing)\\n    {\\n        if (ModelState.IsValid)\\n        {\\n            try\\n            {\\n                _repository.EditBilling(billing);\\n                return RedirectToAction(\\\"Index\\\");\\n            }\\n            catch (Exception ex)\\n            {\\n                //error msg for failed edit in XML file\\n                ModelState.AddModelError(\\\"\\\", \\\"Error editing record. \\\" + ex.Message);\\n            }\\n        }\\n\\n        return View(billing);\\n    }\\n\\n\\n    public ActionResult Delete(int id)\\n    {\\n        Billing billing = _repository.GetBillingByID(id);\\n        if (billing == null)\\n            return RedirectToAction(\\\"Index\\\");\\n        return View(billing);\\n    }\\n\\n\\n    [HttpPost]\\n    public ActionResult Delete(int id, FormCollection collection)\\n    {\\n        try\\n        {\\n            _repository.DeleteBilling(id);\\n            return RedirectToAction(\\\"Index\\\");\\n        }\\n        catch(Exception ex)\\n        {\\n            //error msg for failed delete in XML file\\n            ViewBag.ErrorMsg = \\\"Error deleting record. \\\" + ex.Message;\\n            return View(_repository.GetBillingByID(id));\\n        }\\n    }\\n}\\n\")), mdx(\"h2\", null, \"View\"), mdx(\"p\", null, \"My Views are standard since they use the default T4 scaffolding templates (Create, Delete, Details, Edit, and List). One thing I added to my Create and Edit Views was the jQuery UI date picker. With ASP.NET MVC the Scripts and Content folders come with the jQuery UI base theme installed by default. To utilize jQuery UI I added an optional \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"RenderSection\"), \" to my layout master page in the head for adding the jQuery UI stylesheet to specific Views. All I had to do was add the jQuery UI stylesheet and JavaScript code to the Create and Edit Views to get the date picker up and running.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"_Layout.cshtml\"), \" optional RenderSection tag\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\"\n  }), \"<html>\\n<head>\\n    <title>@ViewBag.Title</title>\\n    <link href=\\\"@Url.Content(\\\"~/Content/Site.css\\\")\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\" />\\n\\n\\n    @RenderSection(\\\"Header\\\", false)\\n\\n    <script src=\\\"@Url.Content(\\\"~/Scripts/jquery-1.4.4.min.js\\\")\\\" type=\\\"text/javascript\\\"></script>\\n</head>\\n</pre>\\n<em>Create.cshtml</em> JavaScript and CSS for Date Picker\\n<pre lang=\\\"html4strict\\\">\\n@section Header{\\n    <link href=\\\"@Url.Content(\\\"~/Content/themes/base/jquery-ui.css\\\")\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\" />\\n}\\n\\n<h2>Create</h2>\\n<script src=\\\"@Url.Content(\\\"~/Scripts/jquery-ui.min.js\\\")\\\" type=\\\"text/javascript\\\"></script>\\n<script src=\\\"@Url.Content(\\\"~/Scripts/jquery.validate.min.js\\\")\\\" type=\\\"text/javascript\\\"></script>\\n<script src=\\\"@Url.Content(\\\"~/Scripts/jquery.validate.unobtrusive.min.js\\\")\\\" type=\\\"text/javascript\\\"></script>\\n\\n<script type=\\\"text/javascript\\\">\\n    $(function () {\\n        $(\\\"#Date\\\").datepicker();\\n    });\\n</script>\\n\")), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"ASP.NET MVC makes it easy to perform CRUD operations on data. The T4 Scaffolding templates create forms and lists for your strongly-typed Views so you don't have to waste time manually coding them yourself. These templates also provide form validation which speeds up the development process. ASP.NET MVC comes with some great tools to get your web apps up and running very quickly.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Create, read, update, and delete (CRUD) operations are easy to perform in ASP.NET MVC. By using the default T4 scaffolding templates andâ€¦","timeToRead":2,"banner":null}},"pageContext":{"slug":"/2011/04/crud-operations-with-xml-data-in-asp-net-mvc-3","formatString":"MM.DD.YYYY"}}}