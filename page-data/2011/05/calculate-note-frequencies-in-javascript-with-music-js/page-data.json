{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/2011/05/calculate-note-frequencies-in-javascript-with-music-js","result":{"data":{"post":{"__typename":"MdxPost","slug":"/2011/05/calculate-note-frequencies-in-javascript-with-music-js","title":"Calculate note frequencies in JavaScript with MUSIC.js","date":"05.22.2011","tags":[{"name":"JavaScript","slug":"java-script"}],"description":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Calculate note frequencies in JavaScript with MUSIC.js\",\n  \"slug\": \"2011/05/calculate-note-frequencies-in-javascript-with-music-js\",\n  \"date\": \"2011-05-22T23:52:00.000Z\",\n  \"comments\": true,\n  \"tags\": [\"JavaScript\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"528px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"18.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdiAuD//xAAXEAADAQAAAAAAAAAAAAAAAAABEBIR/9oACAEBAAEFAp0Sv//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAABECEy/9oACAEBAAY/AlbNOP/EABkQAAIDAQAAAAAAAAAAAAAAAAABESFRQf/aAAgBAQABPyHkcYyrq16NH//aAAwDAQACAAMAAAAQc8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAACAgMBAAAAAAAAAAAAAAABMQARIVFxof/aAAgBAQABPxAhsAi05hIjtXkGSyOGf//Z')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Note frequencies in JavaScript with MUSIC.js\",\n    \"title\": \"Note frequencies in JavaScript with MUSIC.js\",\n    \"src\": \"/static/f5c6a90eac0de6637f4621b644c1276f/ea23e/musicjs_logo.jpg\",\n    \"srcSet\": [\"/static/f5c6a90eac0de6637f4621b644c1276f/46946/musicjs_logo.jpg 240w\", \"/static/f5c6a90eac0de6637f4621b644c1276f/55489/musicjs_logo.jpg 480w\", \"/static/f5c6a90eac0de6637f4621b644c1276f/ea23e/musicjs_logo.jpg 528w\"],\n    \"sizes\": \"(max-width: 528px) 100vw, 528px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"MUSIC.js is a music creation library containing functions and data sets to generate notes, intervals, chords, and scales.\"), mdx(\"p\", null, \"With the new client-side script APIs (\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://wiki.mozilla.org/Audio_Data_API\"\n  }), \"Firefox's Audio Data API\"), \" and Webkit's Web Audio API) we have the ability to do audio synthesis (generate sound) with javascript. MUSIC.js is designed to make it easier to do audio synthesis with javascript by providing functionality for frequency calculations and transposing notes.\"), mdx(DemoButtonGroup, {\n    downloadLink: \"https://github.com/gregjopa/music.js\",\n    demoLink: \"https://www.gregjopa.com/music.js/\",\n    mdxType: \"DemoButtonGroup\"\n  }), mdx(\"h2\", null, \"How it works\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.toverlamp.org/\"\n  }), \"Piers Titus\"), \" and I worked together to design MUSIC.js to provide a clean syntax for defining and managing notes. Piers is the brains behind the music theory involved in this library. Currently MUSIC.js only uses twelve-tone equal temperament tuning since its the most popular tuning and the easiest to implement. The library is built with flexibility in mind to support other tunings. MUSIC.js is currently a work in progress.\"), mdx(\"h2\", null, \"Notes\"), mdx(\"p\", null, \"The Circle of Fifths is used to define notes in MUSIC.js. The main benefits of using the Circle of Fifths are that it gives us the ability to distinguish sharps and flats, and that it makes calculations such as transposing and frequency calculation very easy. We define notes as two valued coordinates \", \"[octave, fifth]\", \" based on the number of octaves and fifths relative to the 'main note'. The D note at octave 0 is used as the 'main note' in MUSIC.js since it is the center of the circle of fifths (F-C-G-D-A-E-B). All notes are defined by their distance from this main note. Lets take a look at an example:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Circle of Fifths Chart w/ the D note highlighted\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"346px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"93.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB70IqoZNNg//EABkQAAEFAAAAAAAAAAAAAAAAAAABEBEgMf/aAAgBAQABBQIwmqN//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEAAwAAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/ASv/xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQITGB/9oACAEBAAE/Ib3UvxAPJxijzCQ6x//aAAwDAQACAAMAAAAQKPcA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAGREAAQUAAAAAAAAAAAAAAAAAEQABEEFR/9oACAECAQE/EHNIan//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMRBBUWH/2gAIAQEAAT8QXg2ezEXoeZglqyWPd09sNqy/IAFVAS01qAad8f/Z')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Circle of Fifths\",\n    \"title\": \"Circle of Fifths\",\n    \"src\": \"/static/ccd578db1c535e54a948a29e9ebd34dc/012b2/circleOfFifths.jpg\",\n    \"srcSet\": [\"/static/ccd578db1c535e54a948a29e9ebd34dc/46946/circleOfFifths.jpg 240w\", \"/static/ccd578db1c535e54a948a29e9ebd34dc/012b2/circleOfFifths.jpg 346w\"],\n    \"sizes\": \"(max-width: 346px) 100vw, 346px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Since D0 is our main note it has the coordinate of \", \"[0, 0]\", \". The note A is a fifth from D so A0 has the coordinate \", \"[0, 1]\", \". The note E is two fifths away from D and requires us to use the octave coordinate to define E0. Since E1 would be \", \"[0, 2]\", \" we need to drop one octave to get E0 which is \", \"[-1, 2]\", \".\"), mdx(\"p\", null, \"The note A4 has a nice frequency of 440 and is used as the base frequency. In order to use A4 as the base frequency a base offset coordinate is added (\", \"[4, 1]\", \") to change the 'main note' from D0 to A4. Make sense? If not, don't worry because MUSIC.js handles this logic so you don't have to.\"), mdx(\"p\", null, \"Here is the syntax to use for defining notes with MUSIC.js:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var n = Note.fromLatin('A4');\\nconsole.log(n); //prints ({coord:[0, 0]})\\n\\n//getters\\nvar freq = n.frequency(); // returns 440\\nvar noteName = n.latin(); // returns \\\"A\\\"\\nvar octave = n.octave(); // returns 4\\n\")), mdx(\"p\", null, \"The coordinate is the only attribute stored for a note object. All other note attributes like frequency, latin name, and octave are calculated upon request.\"), mdx(\"h2\", null, \"Intervals\"), mdx(\"p\", null, \"Intervals measure the distance between two notes and are used by MUSIC.js to define chords and scales. Intervals can be defined by name (ex: \\\"major third\\\", \\\"fifth\\\", etc...), by number of semitones, or by the coordinate directly. MUSIC.js also contains add() and subtract() methods for transposing notes and chords with an interval.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var c = Note.fromLatin('C3');\\n\\n// by semitone\\nvar wholeStep = Interval.fromSemitones(2);\\nvar d = c.add(wholeStep);\\nconsole.log(d.latin()); // \\\"D\\\"\\n\\n// by interval name\\nvar g = c.add('fifth');\\nconsole.log(g.latin()); // \\\"G\\\"\\n\")), mdx(\"h2\", null, \"Chords\"), mdx(\"p\", null, \"Chords are defined by an array of note objects. Chords can be created using intervals or note names.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// by intervals\\nvar c = Note.fromLatin('C4');\\nvar cmaj = c.add(['unison','major third','fifth']);\\n\\n// or by note names\\nvar cmaj = Note.fromLatin('C4E4G4');\\n\\n\\n// then loop through chord array for each note object\\nfor (var i = 0; i < cmaj.length; i++) {\\nconsole.log(cmaj[i].frequency());\\n}\\n\")), mdx(\"h2\", null, \"Scales\"), mdx(\"p\", null, \"MUSIC.js contains a library of scales that are accessed based on the scale name (ex: 'major', 'harmonic minor', etc...). A scale returns an array of note objects.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var n = Note.fromLatin('C4');\\nvar majorScale = n.scale('major');\\n\\n// then loop through scale array for each note object\\nfor (var i = 0; i < majorScale.length; i++) {\\nconsole.log(majorScale[i].frequency());\\n}\\n\")), mdx(\"h2\", null, \"Future of MUSIC.js\"), mdx(\"p\", null, \"The goal for MUSIC.js is to keep it independent from the Audio APIs. This way a modular design can be used for synthesizing audio. MUSIC.js can be responsible for creating the music and a music synthesizer module can be responsible for actually generating the sound data. With this design one synthesizer could be easily swapped out for another.\"), mdx(\"p\", null, \"Right now MUSIC.js is an incomplete music creation library. It can create notes, chords, and scales but can\\u2019t define note duration, sequence, volume, etc\\u2026 I am not sure if this functionality should be included in MUSIC.js or in a separate library. Perhaps a library containing a Song class composed of Tracks and Tracks composed of Notes.\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.musicxml.com/\"\n  }), \"MusicXML\"), \" format does a good job with storing music notation and has become the standard format for sharing sheet music between notation software. However, MusicXML files for complex songs can become quite large and can take a while to parse with javascript. Now that we can render music notation with javascript (ex: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.alphatab.net/\"\n  }), \"https://www.alphatab.net/\"), \") and we can synthesize audio with javascript it makes sense to store music notation with JSON instead of XML. The JSON format is more lightweight and easier to parse with javascript. Perhaps MUSIC.js could be part of a solution for processing music notation in a JSON format.\"), mdx(\"p\", null, \"Leave a comment and let me know what you think of MUSIC.js.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"MUSIC.js is a music creation library containing functions and data sets to generate notes, intervals, chords, and scales. With the newâ€¦","timeToRead":3,"banner":null}},"pageContext":{"slug":"/2011/05/calculate-note-frequencies-in-javascript-with-music-js","formatString":"MM.DD.YYYY"}}}